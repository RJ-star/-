// ==UserScript==
// @name         BV号跳转
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       You
// @match        https://*/*
// @match        http://*/*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        none
// ==/UserScript==

(function() {
    'use strict';
    document.addEventListener("mouseup", function(event) {
        var selectedText = window.getSelection().toString();
        var firstTwoLetters = selectedText.slice(0, 2);
        if (firstTwoLetters === "BV") {
            var button = document.createElement("button");
            button.innerHTML = "跳转到B站";
            button.style.position = "fixed";
            button.style.left = event.pageX + "px";
            button.style.top = event.pageY + "px";
            button.addEventListener("click", function() {
                window.open("https://www.bilibili.com/" + selectedText, "_blank");
                button.style.display = "none";
            });
            document.body.appendChild(button);
        }
    });

})();
